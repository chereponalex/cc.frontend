import{a as T,ap as V,aP as R,r as g,j as e,a5 as E}from"./index-DB17ow0B.js";import{F as B,a as L,b as m}from"./index.esm-B4uKY3iG.js";import{F as N,a as p}from"./Alert-ByogqZv3.js";import{I as d}from"./Input-DH-WCHZ2.js";import"./index-Bcac-H9A.js";import{S as y}from"./Badge-CQXMuIXM.js";import{B as C}from"./Button-CAjmaRgO.js";import"./Upload-C9WU0jIo.js";import{C as w,b as A}from"./Tag-56vMD8vs.js";import"./toast-D1G-7zs5.js";import"./index-BLURZrR2.js";import"./index-DNghyaU3.js";import"./ScrollBar-uf-ZekKR.js";import"./SvgIcon-B3fC32px.js";import{r as P}from"./Views-DXqaN0_h.js";import"./SegmentItemOption-CZ2PeNE8.js";import{N as _,a as I}from"./NumberInput-DN60cQHj.js";import{e as D}from"./validationForm-B8HxzcOJ.js";import{T as G}from"./index-BB8TQc6p.js";import{u as $}from"./useTranslation-BAWqLgco.js";const pe=({data:i,isEdit:k=!1,onNextChange:x,isLoadingEndpoint:v,duplicate:O})=>{const h=T().getItem("mode");console.log(h,"mode");const{t:s}=$(),F=V(),{data:u,isLoading:M}=R(),j=(u==null?void 0:u.data.developers)||{},c=(u==null?void 0:u.data.cities)||{},z=(t,l)=>{x==null||x(t)},f=g.useMemo(()=>Object.entries(j).map(([l,o])=>({label:o,value:l})),[j]),b=g.useMemo(()=>{const t=[];for(const l in c)for(const o in c[l])t.push({value:o,label:c[l][o]});return t},[c]),S=g.useMemo(()=>{var t,l;return{name:(i==null?void 0:i.name)||"",city_id:((t=i==null?void 0:i.city)==null?void 0:t.id)||"",developer_id:((l=i==null?void 0:i.developer)==null?void 0:l.id)||"",is_region:(i==null?void 0:i.is_region)||!1,latitude:(i==null?void 0:i.latitude)||"",longitude:(i==null?void 0:i.longitude)||"",site:(i==null?void 0:i.site)||"",location:(i==null?void 0:i.location)||"",description:(i==null?void 0:i.description)||""}},[i]);return e.jsx(E,{loading:v&&M,type:"cover",children:e.jsx(B,{initialValues:S,enableReinitialize:!0,validationSchema:D,onSubmit:t=>z(t),children:({values:t,touched:l,errors:o})=>(console.log(t,"values"),e.jsx(L,{children:e.jsxs(N,{children:[e.jsxs(w,{children:[e.jsx(p,{label:s("formInput.residentialComplexes.name"),invalid:o.name&&l.name,errorMessage:o.name,layout:"horizontal",asterisk:!0,children:e.jsx(m,{type:"text",autoComplete:"off",name:"name",placeholder:"",component:d})}),e.jsx(p,{label:s("formInput.residentialComplexes.developer"),invalid:o.developer_id&&l.developer_id,errorMessage:o.developer_id,layout:"horizontal",asterisk:!0,children:e.jsx(m,{name:"developer_id",children:({field:r,form:a})=>e.jsx(y,{placeholder:"",field:r,form:a,options:f,value:f.filter(n=>n.value===t.developer_id),onChange:n=>{n&&a.setFieldValue(r.name,n.value)}})})}),e.jsx(p,{label:s("formInput.residentialComplexes.city"),invalid:o.city_id&&l.city_id,errorMessage:o.city_id,layout:"horizontal",asterisk:!0,children:e.jsx(m,{name:"city_id",children:({field:r,form:a})=>e.jsx(y,{placeholder:"",field:r,form:a,options:b,value:b.filter(n=>n.value===t.city_id),onChange:n=>{n&&a.setFieldValue(r.name,n.value)}})})}),e.jsx(p,{label:s("formInput.residentialComplexes.region"),invalid:o.is_region&&l.is_region,errorMessage:o.is_region,layout:"horizontal",children:e.jsx(m,{name:"is_region",component:A})}),e.jsx(p,{label:s("formInput.residentialComplexes.latitude"),invalid:o.latitude&&l.latitude,errorMessage:o.latitude,layout:"horizontal",asterisk:!0,children:e.jsx(m,{name:"latitude",children:({field:r,form:a})=>e.jsx(_,{form:a,field:r,customInput:I,placeholder:"",onValueChange:n=>{a.setFieldValue(r.name,n.value)}})})}),e.jsx(p,{label:s("formInput.residentialComplexes.longitude"),invalid:o.longitude&&l.longitude,errorMessage:o.longitude,layout:"horizontal",asterisk:!0,children:e.jsx(m,{name:"longitude",children:({field:r,form:a})=>e.jsx(_,{form:a,field:r,customInput:I,placeholder:"",onValueChange:n=>{a.setFieldValue(r.name,n.value)}})})}),e.jsx(p,{label:s("formInput.residentialComplexes.website"),invalid:o.site&&l.site,errorMessage:o.site,layout:"horizontal",asterisk:!0,children:e.jsx(m,{type:"text",autoComplete:"off",name:"site",placeholder:"",component:d})}),e.jsx(p,{label:s("formInput.residentialComplexes.location"),invalid:o.location&&l.location,errorMessage:o.location,layout:"horizontal",asterisk:!0,children:e.jsx(m,{type:"text",autoComplete:"off",name:"location",placeholder:"",component:d})}),e.jsx(p,{label:s("formInput.residentialComplexes.description"),invalid:o.description&&l.description,errorMessage:o.description,layout:"horizontal",asterisk:!0,children:e.jsx(m,{type:"text",autoComplete:"off",name:"description",placeholder:"",component:d})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",style:{padding:"10px",position:"sticky",bottom:0,zIndex:10,borderTop:"1px solid #4b5563",background:h==="dark"?"#1f2937":"white"},children:[e.jsx(C,{type:"button",onClick:()=>F(`${P.real_estate_building}`),children:s("global.close")}),e.jsx(C,{loading:v,variant:"solid",type:"submit",children:s(k?"global.save":`${G.REALESTATEBUILDING}Page.buttons.createNew`)})]})]})}))})})};export{pe as F};
